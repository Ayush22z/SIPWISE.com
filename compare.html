<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compare Mutual Funds - SIPWISE</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Inline enhancements (can be moved to style.css) */
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--bg-color, #f8f9fa);
      color: var(--text-color, #333);
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }

    h1 {
      color: #2c3e50;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: 600;
    }

    select, input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #6197ff;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
    }

    button:hover {
      background-color: #4a82e0;
    }

    #compareResult {
      background: #eef3ff;
      padding: 15px;
      border-radius: 8px;
    }

    canvas {
      margin-top: 30px;
      max-width: 100%;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header bar for navigation (optional) -->
    <div class="header-bar" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
      <h1 style="margin: 0;">üìä <span style="color:#6197ff;">SIPWISE</span></h1>
      <div class="button-group" style="display: flex; gap: 10px; margin-top: 10px;">
        <a href="index.html" class="btn-chat" style="text-decoration: none; background: #e0e7ff; padding: 8px 12px; border-radius: 5px;">üè† SIP Calculator</a>
        <a href="chatbot.html" class="compare-btn" style="text-decoration: none; background: #d1fae5; padding: 8px 12px; border-radius: 5px;">ü§ñ Ask Chatbot</a>
      </div>
    </div>
    <p style="margin-top: 5px; color: #666; font-size: 14px;">Compare Mutual Fund SIP Returns</p>

    <!-- Inputs -->
    <label for="fund1">Select Fund 1:</label>
    <select id="fund1"></select>

    <label for="fund2">Select Fund 2:</label>
    <select id="fund2"></select>

    <label for="sipAmount">Monthly SIP (‚Çπ):</label>
    <input type="number" id="sipAmount" value="500" min="100" step="100" />

    <label for="years">Duration (Years):</label>
    <input type="number" id="years" value="5" min="1" max="50" />

    <button onclick="compareFunds()">Compare Now</button>

    <!-- Output -->
    <canvas id="compareChart" height="100"></canvas>
    <div id="compareResult" style="margin-top: 15px;"></div>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Core JS Logic -->
  <script>
    const fundData = {
      "Nippon India Small Cap Fund": 22.99,
      "Quant ELSS Tax Saver Fund": 21.74,
      "Quant Small Cap Fund": 20.76,
      "HSBC Small Cap Fund": 20.60,
      "SBI Small Cap Fund": 20.37,
      "Axis Small Cap Fund": 20.35,
      "Quant Flexi Cap Fund": 20.25,
      "Quant Infrastructure Fund": 19.79,
      "HDFC Small Cap Fund": 19.79,
      "Edelweiss Mid Cap Fund": 19.66,
      "Kotak Emerging Equity Fund": 19.56,
      "Kotak Small Cap Fund": 19.32,
      "Aditya Birla SL Digital India Fund": 19.19,
      "ICICI Pru Technology Fund": 19.03,
      "Quant Active Fund": 18.98,
      "Nippon India Growth Fund": 18.92,
      "HDFC Mid Cap Fund": 18.87,
      "Mirae Asset Large & Midcap Fund": 18.67,
      "Parag Parikh Flexi Cap Fund": 18.61,
      "Franklin Build India Fund": 18.56,
      "Invesco India Infrastructure Fund": 18.55,
      "Invesco India PSU Equity Fund": 18.51,
      "Motilal Oswal ELSS Tax Saver Fund": 18.47,
      "DSP Small Cap Fund": 18.45,
      "SBI Technology Opportunities Fund": 18.43,
      "DSP Natural Resources & New Energy Fund": 18.34,
      "Quant Mid Cap Fund": 18.15,
      "Quant Multi Asset Fund": 18.12,
      "Quant Large and Mid Cap Fund": 17.96,
      "Canara Robeco Emerging Equities Fund": 17.94,
      "Mahindra Manulife Mid Cap Fund": 17.89,
      "Union Midcap Fund": 17.76
      // Keep short for performance. Add more if needed.
    };

    window.onload = () => {
      const fund1 = document.getElementById('fund1');
      const fund2 = document.getElementById('fund2');
      Object.keys(fundData).forEach(name => {
        fund1.add(new Option(name, name));
        fund2.add(new Option(name, name));
      });
      fund1.selectedIndex = 0;
      fund2.selectedIndex = 1;
    };

    function calculateSIPValue(sip, years, cagr) {
      const months = years * 12;
      const rate = cagr / 12 / 100;
      let value = 0;
      for (let i = 0; i < months; i++) {
        value = (value + sip) * (1 + rate);
      }
      return Math.round(value);
    }

    function compareFunds() {
      const sip = parseFloat(document.getElementById('sipAmount').value);
      const years = parseInt(document.getElementById('years').value);
      const fund1Name = document.getElementById('fund1').value;
      const fund2Name = document.getElementById('fund2').value;

      const cagr1 = fundData[fund1Name];
      const cagr2 = fundData[fund2Name];
      const months = years * 12;

      let val1 = 0, val2 = 0;
      const rate1 = cagr1 / 12 / 100;
      const rate2 = cagr2 / 12 / 100;
      const data1 = [], data2 = [];

      for (let i = 0; i < months; i++) {
        val1 = (val1 + sip) * (1 + rate1);
        val2 = (val2 + sip) * (1 + rate2);
        data1.push(Math.round(val1));
        data2.push(Math.round(val2));
      }

      const final1 = Math.round(val1);
      const final2 = Math.round(val2);

      document.getElementById('compareResult').innerHTML = `
        <p><strong>${fund1Name} Final Value:</strong> ‚Çπ${final1.toLocaleString()}</p>
        <p><strong>${fund2Name} Final Value:</strong> ‚Çπ${final2.toLocaleString()}</p>
        <p><strong>Difference:</strong> ‚Çπ${Math.abs(final1 - final2).toLocaleString()}</p>
      `;

      const ctx = document.getElementById('compareChart').getContext('2d');
      if (window.myChart) window.myChart.destroy();
      window.myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: Array.from({ length: months }, (_, i) => `M${i + 1}`),
          datasets: [
            {
              label: fund1Name,
              data: data1,
              borderColor: '#6366f1',
              fill: false,
              tension: 0.25
            },
            {
              label: fund2Name,
              data: data2,
              borderColor: '#f97316',
              fill: false,
              tension: 0.25
            }
          ]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              ticks: {
                callback: val => '‚Çπ' + val.toLocaleString()
              }
            }
          }
        }
      });
    }
  </script>
</body>
</html>
